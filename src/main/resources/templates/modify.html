<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/html">
<head>
    <title>Modifica dati</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

</head>
<body>
<div id="loginFormContainer">
    <form>
        <input type="hidden" th:value="${session.agricoltore.id}" id="id">
        <input class="inputext" placeholder="nome" id="nome" required>
        <input class="inputext" placeholder="nomeBottega" id="nomeBottega" required>
        <input class="inputext" placeholder="indirizzoBottega" id="indirizzoBottega" required>
        <input class="inputext" placeholder="Email" id="email" required>
        <input class="inputext" placeholder="password" id="password" required>
        <button type="button" onclick="submitForm()">aggiorna </button>
    </form>
</div>
<script th:inline="javascript">
    function submitForm() {
        var id = document.getElementById("id").value;
        var nome = document.getElementById("nome").value;
        var nomeBottega = document.getElementById("nomeBottega").value;
        var indirizzoBottega = document.getElementById("indirizzoBottega").value;
        var email = document.getElementById("email").value;
        var password = document.getElementById("password").value;

        var newUser = {
            id: id,
            nome: nome,
            nomeBottega: nomeBottega,
            indirizzoBottega: indirizzoBottega,
            email: email,
            password: password
        };

        $.ajax({
            type: 'POST',
            url: '/api/modify/'+id ,
            contentType: 'application/json',
            data: JSON.stringify(newUser),
            success: function (response) {
                console.log(response);
                window.location.replace("modifica");
            },
            error: function (error) {
                console.error(error);
                $("#esito").text("Utente gi√† esistente");
            }
        });
    }
</script>
</body>
</html>
